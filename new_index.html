{% load static %}
{% block title %} MainPage|GasCap {% endblock %}
<!doctype html>
<html lang="en">
<head>
  <link rel="icon" href="{% static 'gasCap/img/logo_ico.ico' %}" type="image/x-icon">
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
  <link rel="stylesheet" href="{% static 'gasCap/css/fontawesome-all.css' %}">
  <link rel="stylesheet" href="{% static 'gasCap/css/mainstyle.css' %}">
  <link rel="stylesheet" href="{% static 'gasCap/css/index_custom.css' %}">

  <title>Main Page | GasCap</title>

  </head>

<body class="d-flex flex-column h-100">
    <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-55HTPRW" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
    {% include 'partials/_alerts.html' %}
    {% include 'partials/_navbar_new.html'%}

<main class="flex-shrink-0">

  <div id="myCarousel" class="carousel slide" data-bs-ride="carousel">
    <ol class="carousel-indicators">
      <li data-bs-target="#myCarousel" data-bs-slide-to="0" class="active"></li>
      <li data-bs-target="#myCarousel" data-bs-slide-to="1"></li>
      <li data-bs-target="#myCarousel" data-bs-slide-to="2"></li>
    </ol>
    <div class="carousel-inner">
      <div class="carousel-item active">
       
        <img src="{% static 'gasCap/img/trucksnew.jpg' %}">
        <div class="container">
          <div class="carousel-caption text-start">
            <h1>Cap your fuel price today</h1>
            <p>We offer prices for gasoline and diesel in all 50 states.</p>
            <button class ="btn btn-lg btn-primary" onclick="getLocationname()">Prices In Your Area</button>
          </div>
        </div>
      </div>
      <div class="carousel-item">
        <img src="{% static 'gasCap/img/trucksnew.jpg' %}">
       
        <div class="container">
          <div class="carousel-caption text-start">
          
            
            <h1>Select your location</h1>
          </br>
          <form class = "index" action="{% url 'search' %}" method = "get">
            {% csrf_token %}
            <div class = "row">
            <div class= "col-3">
              <label class="sr-only label-white">Gas Or Diesel</label>
              <select name = "gastype" class = "form-control">
                    <option selected = "true" disabled = "disabled">Fuel Type</option>
                    <option value = "Gas">Gasoline</option>
                    <option value = "Diesel">Diesel</option>
                  </select> 

            </div>
            <div class = "col-3">
                <select name="state" class="form-control">
                    <option selected="true" disabled="disabled">State</option>
                    <option value="AL">Alabama</option>
                    <option value="AK">Alaska</option>
                    <option value="AZ">Arizona</option>
                    <option value="AR">Arkansas</option>
                    <option value="CA">California</option>
                    <option value="CO">Colorado</option>
                    <option value="CT">Connecticut</option>
                    <option value="DE">Delaware</option>
                    <option value="DC">District Of Columbia</option>
                    <option value="FL">Florida</option>
                    <option value="GA">Georgia</option>
                    <option value="HI">Hawaii</option>
                    <option value="ID">Idaho</option>
                    <option value="IL">Illinois</option>
                    <option value="IN">Indiana</option>
                    <option value="IA">Iowa</option>
                    <option value="KS">Kansas</option>
                    <option value="KY">Kentucky</option>
                    <option value="LA">Louisiana</option>
                    <option value="ME">Maine</option>
                    <option value="MD">Maryland</option>
                    <option value="MA">Massachusetts</option>
                    <option value="MI">Michigan</option>
                    <option value="MN">Minnesota</option>
                    <option value="MS">Mississippi</option>
                    <option value="MO">Missouri</option>
                    <option value="MT">Montana</option>
                    <option value="NE">Nebraska</option>
                    <option value="NV">Nevada</option>
                    <option value="NH">New Hampshire</option>
                    <option value="NJ">New Jersey</option>
                    <option value="NM">New Mexico</option>
                    <option value="NY">New York</option>
                    <option value="NC">North Carolina</option>
                    <option value="ND">North Dakota</option>
                    <option value="OH">Ohio</option>
                    <option value="OK">Oklahoma</option>
                    <option value="OR">Oregon</option>
                    <option value="PA">Pennsylvania</option>
                    <option value="RI">Rhode Island</option>
                    <option value="SC">South Carolina</option>
                    <option value="SD">South Dakota</option>
                    <option value="TN">Tennessee</option>
                    <option value="TX">Texas</option>
                    <option value="UT">Utah</option>
                    <option value="VT">Vermont</option>
                    <option value="VA">Virginia</option>
                    <option value="WA">Washington</option>
                    <option value="WV">West Virginia</option>
                    <option value="WI">Wisconsin</option>
                    <option value="WY">Wyoming</option>
                  </select>
            </div>

            <div class="col-3">
                <input type="text" class="form-control" id ="city" placeholder="City">
            </div>
        </div>
          </br>
          <button type="submit" class = "btn btn-lg btn-primary">Find Prices</button>
            </form>
          </div>
        </div>
      </div>
      <div class="carousel-item">
        <img src="{% static 'gasCap/img/trucksnew.jpg' %}">
        <div class="container">
          <div class="carousel-caption text-start">
            <h1>Spend smarter</h1>
            <p>Begin saving on gasoline and diesel costs today.</p>
            <p><a class="btn btn-lg btn-primary" href="{% url 'about' %}" role="button">Learn more</a></p>
          </div>
        </div>
      </div>
    </div>
    <a class="carousel-control-prev" href="#myCarousel" role="button" data-bs-slide="prev">
      <span class="carousel-control-prev-icon" aria-hidden="true"></span>
      <span class="visually-hidden">Previous</span>
    </a>
    <a class="carousel-control-next" href="#myCarousel" role="button" data-bs-slide="next">
      <span class="carousel-control-next-icon" aria-hidden="true"></span>
      <span class="visually-hidden">Next</span>
    </a>
  </div>


  <!-- Marketing messaging and featurettes
  ================================================== -->
  <!-- Wrap the rest of the page in another container to center all the content. -->

  <div class="container marketing">

    <!-- Three columns of text below the carousel -->
    <div class="row">
      <div class="col-lg-4">
        <i class="fas fa-gas-pump fa-7x"></i>

        <h2>Cap your gas price</h2>
        <p>Simply and easily cap the price of gas you pay at the pump. For every dollar you spend that exceeds your capped price, GasCap will rebate you directly. </p>
      </div><!-- /.col-lg-4 -->
      <div class="col-lg-4">
        <i class="fas fa-money-bill-wave fa-7x"></i>

        <h2>Stabilize your costs</h2>
        <p>GasCap allows you to more easily budget and plan for the future by converting a variable cost into a fixed one. </p>
      </div><!-- /.col-lg-4 -->
      <div class="col-lg-4">
        <i class="fas fa-star fa-7x"></i>

        <h2>Peace of mind</h2>
        <p>Save money and stop worrying about rising gasoline and diesel prices.</p>
      </div><!-- /.col-lg-4 -->
    </div><!-- /.row -->


    <!-- START THE FEATURETTES -->

    <hr class="featurette-divider">

    <div class="row featurette">
      <div class="col-md-7 order-md-2">
        <h2 class="featurette-heading text-secondary">Focus on the road, <span class="text-muted">not your fuel bill. </span></h2>
        <p class="lead">Sign up today to start saving.</p>
        <a href = "{% url 'register' %}" > <button type="button" class="btn btn-primary btn-lg">Sign Up</button> </a>
      </div>
      <div class="col-md-5">
        

        <img src="{% static 'gasCap/img/semi.jpg' %}" width="500" height="400">
      </div>
    </div>

    <hr class="featurette-divider">

    <div class="row featurette">
      <div class="col-md-7 ">
        <h2 class="featurette-heading text-secondary">Subscribe to our <span class="text-muted">newsletter.</span></h2>
        <p class="lead">We will publish key updates and announcements from the GasCap team!</p>
        <form action="{% url 'subscribe' %}"  method = 'POST'>
          {% csrf_token %}
          {{ form }}
            <button type="submit" value = "Subscribe" class="btn btn-primary btn-md" id = "email_submit">Subscribe</button>
        </form>
      </div>
      <div class="col-md-5">
        <img src="{% static 'gasCap/img/kenworth.jpg' %}" height="300" width="500">
      </div>
    </div>

    <hr class="featurette-divider">
    <div class="row featurette">
      <div class="col-md-7 order-md-2">
        <h2 class="featurette-heading text-secondary">Connect with us!</h2>
        
        <a class="icon brands fab fa-facebook fa-4x " href="https://www.facebook.com/GasCapTech/"> <span class="label"></span></a>
        <a class="icon brands fab fa-twitter fa-4x" href="https://www.twitter.com/GasCapTech/"> <span class="label"></span></a>
        <a class="icon brands fab fa-linkedin fa-4x" href="https://www.linkedin.com/company/GasCapTech/"> <span class="label"></span></a>
      </div>
      <div class="col-md-5 order-md-1">
        <img src="{% static 'gasCap/img/seattle.jpg' %}" width="500" height="350">
      </div>
    </div>

    <hr class="featurette-divider">

    <!-- /END THE FEATURETTES -->

  </div><!-- /.container -->


  {% include 'partials/_footer_new.html' %}
</main>



    <script src="{% static 'gasCap/js/bootstrap.bundle.min.js' %}">
      $(document).ready(function () {
      $("#message").fadeOut(5000);
        });
    </script>

  <script>
    var x = document.getElementById("demo");
    var home = window.location.origin;
    function showPosition(position) {
      var lat = position.coords.latitude;
      var long = position.coords.longitude;
      document.write("hello");
      console.log(home);
    
      
      var form;
      form = `<form action='{% url 'capgas' %}' method='POST' class='location-form'>{% csrf_token %}<input type='hidden' name='lat' value='`+lat+`'/>"
        +"<input type='hidden' name='long' value='`+long+`'/></form>`;
      document.write(form);
      $('.lat-form').append(form);
      
      
      $('.location-form').submit();
      
    
    
      };
    function ajaxPost(){
      $.ajax({			
        url : home+"{% url 'capgas' %}", // the endpoint
        type : "POST", // http method
        data : { 'lat' : lat,
            'long' : long },
            headers: { "X-CSRFToken": "{{ csrf_token }}" }, // for csrf token
            success: function (data) {
              alert(data.result);
            },
            error: function (jqXHR, textStatus, errorThrown) { alert("failure"); }
            
        }); // data sent with the post request
    }
    function getLocationname() {
      
      if (navigator.geolocation) {
      navigator.geolocation.getCurrentPosition(showPosition);
      
      } else { 
      x.innerHTML = "Geolocation is not supported by this browser.";
      }
    };
      </script>


  </body>
</html>
